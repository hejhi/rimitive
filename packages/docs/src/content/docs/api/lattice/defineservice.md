---
title: "defineService() function"
sidebar:
  label: "defineService()"
  badge:
    text: "fn"
    variant: "tip"
---

<!-- Do not edit this file. It is automatically generated by API Documenter. -->

[Home](../) &gt; [@lattice/lattice](./) &gt; defineService

## defineService() function

Define a composable service factory with dependency injection.

This is the foundational building block for creating Lattice services. It implements a double-function pattern: 1. Outer function receives dependencies (injected at composition time) 2. Inner function receives user arguments (passed when creating instances)

The returned factory has a `.create(deps)` method that wires dependencies.

**Signature:**

```typescript
export declare function defineService<TArgs extends unknown[], TResult, TContext>(factory: (context: TContext) => (...args: TArgs) => TResult): (...args: TArgs) => Service<TResult, TContext>;
```

## Parameters

<table><thead><tr><th>

Parameter


</th><th>

Type


</th><th>

Description


</th></tr></thead>
<tbody><tr><td>

factory


</td><td>

(context: TContext) =&gt; (...args: TArgs) =&gt; TResult


</td><td>

Double-function: `(deps) => (...args) => ServiceDefinition`


</td></tr>
</tbody></table>

**Returns:**

(...args: TArgs) =&gt; [Service](./service/)<!-- -->&lt;TResult, TContext&gt;

A factory function that returns a `Service` with `.create(deps)` method

## Example 1

Basic service definition

```ts
import { defineService } from '@lattice/lattice';

type CounterDeps = { logger: (msg: string) => void };

const Counter = defineService(
  ({ logger }: CounterDeps) =>           // deps injected at compose time
    (initialValue: number) => ({         // args passed by user
      name: 'counter',
      impl: {
        value: initialValue,
        increment() {
          this.value++;
          logger(`Counter: ${this.value}`);
        },
      },
    })
);

// Usage with compose
const ctx = compose(
  { counter: Counter(0) },
  { logger: console.log }
);
ctx.counter.increment(); // logs "Counter: 1"
```

## Example 2

Service with lifecycle hooks

```ts
const TimerService = defineService(
  ({ interval }: { interval: number }) =>
    () => ({
      name: 'timer',
      impl: { elapsed: 0 },
      init(ctx) {
        const id = setInterval(() => this.impl.elapsed++, interval);
        ctx.destroy(() => clearInterval(id));
      },
    })
);
```

