---
title: "ServiceDefinition type"
sidebar:
  label: "ServiceDefinition"
  badge:
    text: "type"
    variant: "note"
---

<!-- Do not edit this file. It is automatically generated by API Documenter. -->

[Home](../) &gt; [@lattice/lattice](./) &gt; ServiceDefinition

## ServiceDefinition type

A service definition that can be composed into a Lattice context.

ServiceDefinitions are the building blocks of Lattice composition. They describe an implementation plus optional lifecycle hooks.

**Signature:**

```typescript
export type ServiceDefinition<TName extends string, TImpl> = {
    name: TName;
    impl: TImpl;
    adapt?(impl: TImpl, context: ServiceContext): TImpl;
    instrument?(impl: TImpl, instrumentation: InstrumentationContext, context: ServiceContext): TImpl;
    init?(context: ServiceContext): void;
    destroy?(context: ServiceContext): void;
};
```
**References:** [ServiceContext](./servicecontext/)<!-- -->, [InstrumentationContext](./instrumentationcontext/)

## Example 1

Basic service definition

```ts
const counterService: ServiceDefinition<'counter', CounterImpl> = {
  name: 'counter',
  impl: {
    value: 0,
    increment() { this.value++; },
  },
};

const ctx = compose(counterService);
ctx.counter.increment();
```

## Example 2

With lifecycle hooks

```ts
const timerService: ServiceDefinition<'timer', TimerImpl> = {
  name: 'timer',
  impl: createTimer(),
  init(ctx) {
    // Called when added to context
    this.impl.start();
  },
  destroy(ctx) {
    // Called when context is disposed
    this.impl.stop();
  },
};
```

## Example 3

With adapt hook for context awareness

```ts
const resourceService: ServiceDefinition<'resource', () => Resource> = {
  name: 'resource',
  impl: () => createResource(),
  adapt(impl, ctx) {
    return () => {
      if (ctx.isDestroyed) throw new Error('Context disposed');
      const resource = impl();
      ctx.destroy(() => resource.cleanup());
      return resource;
    };
  },
};
```

