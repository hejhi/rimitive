---
title: Server Rendering
description: Set up basic SSR with Rimitive adapters.
---

import { Aside } from '@astrojs/starlight/components';

This guide covers the practical setup for basic SSR. If you're new to SSR concepts, read [Intro to SSR](/guides/intro-to-ssr) first.

---

## Render Functions

Rimitive provides three render functions for different SSR needs:

| Function | Use Case |
|----------|----------|
| `renderToString` | Basic sync SSR â€” no async data loading |
| `renderToStringAsync` | Waits for all `load()` boundaries before returning HTML |
| `renderToStream` | Sends HTML immediately, streams data as it loads |

This guide covers `renderToString`. For async data loading, see [SSR with Data Loading](/guides/ssr-loading). For streaming, see [Streaming SSR](/guides/streaming-ssr).

---

## What You Need

For basic SSR, you need:
1. A **server adapter** that creates elements using linkedom instead of the real DOM
2. A **client hydration adapter** that walks existing DOM instead of creating new elements

---

## Shared Service

Start with creating the service a little differently than normal. This time, `createService()` will take an adapter, so both the server and client can use the same service for running:

```typescript
// service.ts
import { compose } from '@rimitive/core';
import { SignalModule, ComputedModule, EffectModule } from '@rimitive/signals/extend';
import { createElModule } from '@rimitive/view/el';
import { createMatchModule } from '@rimitive/view/match';
import type { Adapter } from '@rimitive/view/types';
import type { DOMAdapterConfig } from '@rimitive/view/adapters/dom';

//                            ðŸ‘‡ New!
export function createService(adapter: Adapter<DOMAdapterConfig>) {
  return compose(
    SignalModule,
    ComputedModule,
    EffectModule,
    createElModule(adapter),
    createMatchModule(adapter)
  );
}

export type Service = ReturnType<typeof createService>;
```

Now, this file can be shared with both the server and the client âœ¨

## Server Setup

`createLinkedomAdapter()` creates a server-friendly adapter powered by [linkedom](https://github.com/WebReflection/linkedom), a lightweight DOM implementation for Node.js. When `el("div")` runs on the server, it creates a linkedom element instead of a real DOM elementâ€”same structure, no browser required.

Create a fresh adapter and service for each incoming request. Reusing them across requests would cause data from one user to leak into another's response.

```typescript
// server.ts
import { createServer } from 'node:http';
import { createLinkedomAdapter, renderToString } from '@rimitive/ssr/server';
import { createService } from './service.js';
import { App } from './App.js';

const server = createServer((req, res) => {
  // Create per-request adapter and service
  const { adapter, serialize } = createLinkedomAdapter();
  const service = createService(adapter);

  // Create and render the app
  const root = App(service).create(service);
  const html = renderToString(root, serialize);

  res.writeHead(200, { 'Content-Type': 'text/html' });
  res.end(`<!DOCTYPE html>
<html>
<body>
  <div class="app">${html}</div>
  <script src="/client.js"></script>
</body>
</html>`);
});

server.listen(3000);
```

### What happens:

1. `createLinkedomAdapter()` returns an `adapter` (for creating elements) and `serialize` (for converting individual elements to HTML)
2. `createService(adapter)` wires up your app with the server adapter
3. `App(service).create(service)` runs your app, building a linkedom element tree
4. `renderToString(root, serialize)` walks the tree and converts it to an HTML string

Finally the HTML is sent to the client (and your `<script>` tag loads the client bundle).

<Aside type="tip" title="Working Example">
See [`packages/examples/ssr-router`](https://github.com/hejhi/rimitive/tree/main/packages/examples/ssr-router) for a complete basic SSR implementation with routing.
</Aside>

---

## Next Steps

- **[Client Hydration](/guides/client-hydration)** â€” Make the server-rendered HTML interactive
- **[SSR with Data Loading](/guides/ssr-loading)** â€” Fetch data during SSR with `load()`
- **[Streaming SSR](/guides/streaming-ssr)** â€” Send HTML progressively as data loads
